<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>News</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="news.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>News from TiMMA</h1>
    </div>

    <div class="news-carousel">
      <div class="carousel-wrapper">
        <div class="carousel-track" id="carouselTrack">
          
          <!-- News Slide 1 -->
          <div class="slide" style="background-image: url('https://timma-test.efa.gr/files/asset/026a182519304ad67b9fa2539acc3c06924719e0.png')">
            <div class="news-content">
              <h3>TiMMA in the Cahiers de l’ANR</h3>
              <p class="news-date">May 2023</p>
              <p>The TiMMA project is presented in the Cahiers de l'ANR on Paleoenvironment and Human Societies (Cahier ANR n°15).</p>
              <a href="https://anr.fr/fr/ressources/cahiers-thematiques/paleoenvironnements-et-societes-humaines/" class="btn-read-more" target="_blank">Read More</a>
            </div>
          </div>

          <!-- News Slide 2 -->
          <div class="slide" style="background-image: url('https://timma-test.efa.gr/files/asset/2868a3875ecc1f1977f7a87363d25e254bd011b4.jpeg')">
            <div class="news-content">
              <h3>TiMMA at the CAA 2023</h3>
              <p class="news-date">3-6 April 2023, Amsterdam</p>
              <p>Bastien Rueff will present a paper on the TiMMA database entitled "Dealing with old and new excavation datasets: the TiMMA web-database".</p>
              <a href="https://2023.caaconference.org/" class="btn-read-more" target="_blank">More Information</a>
            </div>
          </div>

          <!-- Cretological Congress Slide -->
          <div class="slide" style="background-image: url('https://timma-test.efa.gr/files/asset/93f503753fa1e2f8a67f09106539cd56bd9c1960.png')">
            <div class="news-content">
              <h3>TiMMA at the Cretological congress in Ayios Nikolaos, 5-9 October 2022</h3>
              <p>Between 5 and 9 October, the 13th International Congress of Cretan Studies will be held at Agios Nikolaos, Crete. On this occasion Marilena Pateraki, Maia Pomadère, Bastien Rueff, Eleftheria Tsakanika and Sylvie Rougier-Blanc will present a paper entitled: “A rise in the use of timber in Neopalatial architecture? First results of the TiMMA project at Malia”.</p>
              <a href="https://www.13-iccs.gr/" class="btn-read-more" target="_blank">Congress Website</a>
            </div>
          </div>

          <!-- Webinar 2 Slide (no image) -->
          <div class="slide no-image">
            <div class="news-content">
              <h3>TiMMA webinar n°2</h3>
              <p class="news-date">Friday, 24 March, 17:00-19:00 (Greek time)</p>
              <p>Paul Bacoup, post-doc researcher in the TiMMA project, will present a work in progress: Protohistoric wooden architecture in the Aegean area. Which vocabulary to use? Reflection on the TiMMA database.</p>
            </div>
          </div>

          <!-- Polythyra Training Slide (no image) -->
          <div class="slide no-image">
            <div class="news-content">
              <h3>Polythyra training</h3>
              <p class="news-date">Friday, 10 March, 17:00-19:00 (Greek time)</p>
              <p>A training to polythyra identification, analysis and description into the database.</p>
            </div>
          </div>

          <!-- Zotero Training Slide (no image) -->
          <div class="slide no-image">
            <div class="news-content">
              <h3>Zotero training to the TiMMA database</h3>
              <p class="news-date">Wednesday, 1 February, 17:00-19:00 (Greek time)</p>
              <p>How to use Zotero in the TiMMA database (Bastien Rueff).</p>
            </div>
          </div>

          <!-- Webinar 1 Slide (no image) -->
          <div class="slide no-image">
            <div class="news-content">
              <h3>TiMMA webinar n°1</h3>
              <p class="news-date">Friday 16 December 2022, 17:00-19:00 (Greek time)</p>
              <p>Pavol Hnila, Freie Universität Berlin, Institut für Altorientalistik. Loadbearing horizontal timber framing in the Aegean Bronze Age architecture and its Anatolian parallels.</p>
            </div>
          </div>

          <!-- Database Training Slide (no image) -->
          <div class="slide no-image">
            <div class="news-content">
              <h3>Database training session</h3>
              <p class="news-date">Monday, 14 November, 15:00-17:00 (Greek time)</p>
              <p>Using the TiMMA database (Bastien Rueff).</p>
            </div>
          </div>

          <!-- Timber ID Training Slide (no image) -->
          <div class="slide no-image">
            <div class="news-content">
              <h3>Timber identification training sessions</h3>
              <p class="news-date">Saturday, 12 November, 10:00-13:00 (Greek time)</p>
              <p>Presentation of the Database and of the web site (Bastien Rueff). Examples from the pilot site of Malia (Maia Pomadere, Marilena Pateraki). Methods used to collect and fill the base (The team of Malia and Eleftheria Tsakanika). Discussions.</p>
            </div>
          </div>

          <!-- Protocol Slide (no image) -->
          <div class="slide no-image">
            <div class="news-content">
              <h3>Proposition of a protocol</h3>
              <p class="news-date">Saturday, 29 October, 10:00-14:00 (Greek time)</p>
              <p>Timber in Akrotiri (Clairy palyvou). Timber in Minoan and Mycenaean Architecture (Eleftheria Tsakanika).</p>
            </div>
          </div>

        </div>
      </div>
      <button class="carousel-nav prev" id="prevBtn">‹</button>
      <button class="carousel-nav next" id="nextBtn">›</button>
      
      <div class="carousel-dots" id="carouselDots"></div>
    </div>
  </div>

  <script>
    // The same carousel logic from about.html is used here.
    // It's robust and handles responsiveness.
    class Carousel {
      constructor() {
        this.track = document.getElementById('carouselTrack');
        this.slides = document.querySelectorAll('.slide'); // Use .slide instead of .card
        this.prevBtn = document.getElementById('prevBtn');
        this.nextBtn = document.getElementById('nextBtn');
        this.dotsContainer = document.getElementById('carouselDots');

        this.currentIndex = 0;
        this.autoPlayInterval = null;
        this.autoPlayDelay = 5000; // Slower autoplay for news

        this.slideWidth = 0;
        this.totalSlides = 0;

        this.init();
      }

      isMobile() {
        return window.innerWidth <= 768;
      }

      updateMetrics() {
        this.track.style.transition = 'none';
        
        // The slide width is always the width of the container
        this.slideWidth = this.track.parentElement.offsetWidth;
        this.totalSlides = this.slides.length;

        this.updateCarousel();
        
        setTimeout(() => {
          this.track.style.transition = 'transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
        }, 50);
      }

      init() {
        if (this.slides.length === 0) return; // Don't initialize if no slides
        this.updateMetrics();
        this.createDots();
        this.bindEvents();
        this.startAutoPlay();

        window.addEventListener('resize', () => {
          this.updateMetrics();
          this.currentIndex = Math.min(this.currentIndex, this.totalSlides - 1);
          if (this.currentIndex < 0) this.currentIndex = 0;
          this.createDots();
        });
      }

      createDots() {
        this.dotsContainer.innerHTML = '';
        for (let i = 0; i < this.totalSlides; i++) {
          const dot = document.createElement('button');
          dot.classList.add('dot');
          if (i === this.currentIndex) dot.classList.add('active');
          dot.addEventListener('click', () => this.goToSlide(i));
          this.dotsContainer.appendChild(dot);
        }
      }

      bindEvents() {
        this.prevBtn.addEventListener('click', () => {
            this.pauseAutoPlay();
            this.prevSlide();
            this.startAutoPlay();
        });
        this.nextBtn.addEventListener('click', () => {
            this.pauseAutoPlay();
            this.nextSlide();
            this.startAutoPlay();
        });

        let startX = 0;
        this.track.addEventListener('touchstart', (e) => {
          startX = e.touches[0].clientX;
          this.pauseAutoPlay();
        }, { passive: true });

        this.track.addEventListener('touchend', (e) => {
          const endX = e.changedTouches[0].clientX;
          const diff = startX - endX;
          if (Math.abs(diff) > 50) {
            if (diff > 0) this.nextSlide();
            else this.prevSlide();
          }
          this.startAutoPlay();
        });

        this.track.addEventListener('mouseenter', () => this.pauseAutoPlay());
        this.track.addEventListener('mouseleave', () => this.startAutoPlay());
      }

      updateCarousel() {
        const translateX = -this.currentIndex * this.slideWidth;
        this.track.style.transform = `translateX(${translateX}px)`;
        
        document.querySelectorAll('.dot').forEach((dot, index) => {
          dot.classList.toggle('active', index === this.currentIndex);
        });
        
        const hasEnoughSlides = this.slides.length > 1; // Show nav if more than one slide
        this.prevBtn.style.display = hasEnoughSlides ? 'flex' : 'none';
        this.nextBtn.style.display = hasEnoughSlides ? 'flex' : 'none';
      }

      nextSlide() {
        this.currentIndex++;
        if (this.currentIndex >= this.totalSlides) {
          this.currentIndex = 0;
        }
        this.updateCarousel();
      }

      prevSlide() {
        this.currentIndex--;
        if (this.currentIndex < 0) {
          this.currentIndex = this.totalSlides - 1;
        }
        this.updateCarousel();
      }

      goToSlide(index) {
        this.currentIndex = Math.max(0, Math.min(index, this.totalSlides - 1));
        this.updateCarousel();
        this.pauseAutoPlay();
        this.startAutoPlay();
      }

      startAutoPlay() {
        this.pauseAutoPlay();
        this.autoPlayInterval = setInterval(() => {
          this.nextSlide();
        }, this.autoPlayDelay);
      }

      pauseAutoPlay() {
        if (this.autoPlayInterval) {
          clearInterval(this.autoPlayInterval);
          this.autoPlayInterval = null;
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      new Carousel();
    });
  </script>

</body>
</html>